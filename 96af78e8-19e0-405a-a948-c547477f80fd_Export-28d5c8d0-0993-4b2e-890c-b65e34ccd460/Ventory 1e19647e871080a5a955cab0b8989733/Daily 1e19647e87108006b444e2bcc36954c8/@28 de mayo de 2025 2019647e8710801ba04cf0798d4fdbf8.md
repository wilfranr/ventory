# @28 de mayo de 2025

### **ğŸŸ¢ Avance 25 de mayo 2025**

### **ğŸ¯ Objetivo:**

Implementar filtro multiempresa en el mÃ³dulo de usuarios para respetar el aislamiento de datos por empresa en una sola base de datos.

---

### **âœ… Tareas realizadas:**

- **Configurado filtro multiempresa en el listado de usuarios:**
    - Si el usuario es **superadmin** o pertenece a la empresa **Ventory**, puede ver todos los usuarios.
    - Si el usuario es de otra empresa, **solo puede ver usuarios de su misma empresa**.
- **Modificado el mÃ©todo `findAll` de UsersService** para recibir el usuario actual y aplicar el filtro por `companyId`.
- **Actualizado el UsersController** para pasar el usuario autenticado usando el decorador `@CurrentUser`.
- **Validado que los permisos siguen funcionando correctamente** en conjunto con la lÃ³gica multiempresa.
- **Establecida la regla general:**
    
    â€œTodo desarrollo futuro debe tener en cuenta el alcance de empresa usando `companyId`, garantizando el aislamiento entre empresas en todos los mÃ³dulos del sistema.â€
    

---

### **ğŸ“Œ Siguientes pasos sugeridos:**

- Replicar este filtro en otros mÃ³dulos (pedidos, Ã³rdenes, roles, etc.).
- Centralizar el filtro multiempresa en un helper para reutilizaciÃ³n.
- Documentar el ID de la empresa Ventory y considerar moverlo a una variable de entorno.
- Agregar tests automÃ¡ticos para validar el aislamiento de datos por empresa.